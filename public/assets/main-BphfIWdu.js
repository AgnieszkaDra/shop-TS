import"./modulepreload-polyfill-B5Qt9EMX.js";const U=()=>{const n=document.createElement("button");n.id="burger-menu",n.classList.add("burger-menu"),n.setAttribute("aria-label","Toggle navigation");for(let e=0;e<3;e++){const t=document.createElement("span");n.appendChild(t)}return n},O=()=>{const n=document.createElement("button");n.id="close-icon",n.classList.add("close-icon"),n.setAttribute("aria-label","Close");for(let e=0;e<2;e++){const t=document.createElement("span");n.appendChild(t)}return n},D=[{categoryName:"Strona główna",path:"/"},{categoryName:"Strefa dziecka",path:"/category/Dziecko"},{categoryName:"Strefa kobiet",path:"/category/Kobieta"}];function R(){return"<h1>Welcome to Home Page</h1>"}function J(){return"<h1>Admin Dashboard</h1>"}function E(){return"<h1>404 - Page Not Found</h1>"}const g="http://localhost:5050";async function Z(){const n=`${g}/cart/`;try{return await(await fetch(n)).json()}catch(e){return console.error("Error fetching products:",e),[]}}const K=async()=>{const n=await Z(),e=document.createElement("div");e.classList.add("products-container");const t=document.createElement("h1");t.textContent="Koszyk",t.style.textAlign="center";const o=document.createElement("ul");return o.classList.add("products__list"),Object.entries(n).forEach(([,r])=>{const a=document.createElement("li");a.classList.add("products__item"),a.style.backgroundImage=`url('/assets/${r.imageBackground}.jpg')`;const c=document.createElement("div");c.style.paddingTop="1rem";const l=document.createElement("h3");l.classList.add("products__title"),l.textContent=r.name;const i=document.createElement("span");i.textContent=`${r.price}zł`,c.appendChild(l),c.appendChild(i);const s=document.createElement("button");s.classList.add("products__addButton"),s.textContent="Dodaj do koszyka",s.addEventListener("click",async()=>{try{if((await fetch(`${g}/cart/${r.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)alert(`${r.name} został usunięty z koszyka!`),a.remove();else throw new Error("Wystąpił błąd podczas usuwania z koszyka")}catch(d){console.error("Error removing product from cart:",d),alert("Wystąpił problem podczas usuwania z koszyka.")}}),a.appendChild(c),a.appendChild(s),o.appendChild(a)}),e.appendChild(t),e.appendChild(o),e},C=()=>{const n=document.createElement("div");return n.className="input__wrapper",n},T=n=>{const e=C(),t=document.createElement("input");return t.className="input",t.type="text",t.placeholder=n.placeholder??"",t.name=n.name,e.insertBefore(t,e.querySelector(".error-message")),e},$=n=>{const e=C(),t=document.createElement("input");return t.className="input",t.type="number",t.placeholder=n.placeholder??"",n.min!==void 0&&(t.min=n.min.toString()),n.max!==void 0&&(t.max=n.max.toString()),t.name=n.name,e.insertBefore(t,e.querySelector(".error-message")),e},P=n=>{const e=C(),t=document.createElement("select");return t.className="select",t.name=n.name,n.options.forEach(o=>{const r=document.createElement("option");r.value=o.value.toString(),r.textContent=o.label,t.appendChild(r)}),e.insertBefore(t,e.querySelector(".error-message")),e},G=n=>{const e=C(),t=document.createElement("input");return t.className="input",t.type="email",t.name=n.name,t.required=n.required??!1,n.placeholder&&(t.placeholder=n.placeholder),e.insertBefore(t,e.querySelector(".error-message")),e},V=n=>{const e=C(),t=document.createElement("input");return t.className="input",t.type="password",t.name=n.name,t.required=n.required??!1,n.placeholder&&(t.placeholder=n.placeholder),e.insertBefore(t,e.querySelector(".error-message")),e},Q=n=>{let e;switch(n.type){case"text":e=T(n);break;case"number":e=$(n);break;case"select":e=P(n);break;case"email":e=G(n);break;case"password":e=V(n);break;default:throw new Error(`Unsupported field type: ${n.type}`)}return e},I={createTextField:T,createNumberField:$,createSelectField:P,createFields:Q},y=(n,e,t)=>{var a;const o=n.querySelector(`span[id="${e}-error"]`);o&&o.remove();const r=n.querySelector(`label[for="${e}"]`);if(r){const c=document.createElement("span");c.id=`${e}-error`,c.className="error-message",c.textContent=t,(a=r.parentElement)==null||a.appendChild(c)}},X=n=>{const e=document.createElement("div");e.className="success-message",e.textContent="Form is sent successfully!",n.appendChild(e)},Y=async(n,e,t)=>{const o=[];for(const r of n){const a=e[r.name];t.querySelectorAll(`.error-message[id="${r.name}-error"]`).forEach(i=>i.remove());const l=t.querySelector(".success-message");if(l&&l.remove(),r.required&&(a===void 0||a==="")&&(o.push(`${r.label} is required.`),y(t,r.name,`${r.label} is required.`)),r.type==="number"){const i=Number(a);r.min!==void 0&&i<r.min&&(o.push(`${r.label} must be at least ${r.min}.`),y(t,r.name,`${r.label} must be at least ${r.min}.`)),r.max!==void 0&&i>r.max&&(o.push(`${r.label} must be less than ${r.max}.`),y(t,r.name,`${r.label} must be less than ${r.max}.`))}r.type==="email"&&(a?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(a))||(o.push("Please enter a valid email address."),y(t,r.name,"Please enter a valid email address.")):(o.push(`${r.label} is required.`),y(t,r.name,`${r.label} is required.`))),r.type==="password"&&(String(a)||(o.push(`${r.label} is required.`),y(t,r.name,`${r.label} is required.`)))}return o.length>0?console.error("Form validation errors:",o):X(t),o};async function ee(n){const e={...n,lastLogin:new Date().toISOString()};return await(await fetch(`${g}/loggedUser`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}async function te(n){const t=new TextEncoder().encode(n),o=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(o)).map(a=>a.toString(16).padStart(2,"0")).join("")}const q=(n,e,t)=>{n.addEventListener("submit",async o=>{o.preventDefault();const r={};if(e.forEach(i=>{const s=n.querySelector(`[name=${i.name}]`);(s instanceof HTMLInputElement||s instanceof HTMLSelectElement)&&(r[i.name]=s.value)}),(await Y(e,r,n)).length>0){console.error("Form validation failed.");return}"password"in r&&(r.password=await te(r.password));async function c(i,s){const d=await fetch(i,s);if(!d.ok)throw new Error(`Error: ${d.status}`);return await d.json()}const l=`${g}/users`;if(t==="register")try{await c(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})}catch(i){console.error("Registration Error:",i)}if(t==="login")try{const s=(await c(l)).find(d=>d.email===r.email&&d.password===r.password);if(s){const d=await ee(s);localStorage.setItem("currentUser",JSON.stringify(d))}else console.error("Login failed: User not found.")}catch(i){console.error("Login Error:",i)}})},_=[{category:"register",type:"text",label:"Name and Surname",name:"name",placeholder:"Enter your name",required:!0},{category:"register",type:"email",name:"email",required:!0,label:"Email Address",placeholder:"Enter your email"},{category:"login",type:"email",name:"email",required:!0,label:"Email Address",placeholder:"Enter your email"},{category:"register",type:"password",name:"password",required:!0,label:"Password",placeholder:"Enter your password"},{category:"login",type:"password",name:"password",required:!0,label:"Password",placeholder:"Enter your password"}],ne=n=>{const e=document.createElement("form");return e.className="form",e.setAttribute("novalidate",""),e.classList.add(`form--${n}`),e},M=n=>{const e=document.createElement("div");e.className="container-register";const t=document.querySelector(".container-register");t&&t.classList.toggle("block"),document.querySelector(".container-login")&&e.classList.toggle("block");const r=document.createElement("div");r.className="form__wrapper";const a=document.createElement("h2");a.className="form__title",a.textContent="Rejestracja";const c=ne("register"),l=n.filter(p=>p.category==="register");l.forEach(p=>{const m=I.createFields(p);c.appendChild(m)});const i=document.createElement("button");i.className="button",i.classList.add("form__button"),i.type="submit",i.textContent="Wyślij",c.appendChild(i);const s=document.createElement("p");s.classList.add("form__foot"),s.textContent="Zarejestrowany?";const d=document.createElement("a");return d.className="form__foot__link",d.textContent="Zaloguj się",d.addEventListener("click",p=>{p.preventDefault(),document.querySelector(".container-register")&&e.classList.toggle("block"),document.querySelector(".container-login")&&e.classList.toggle("block");const h=A(_),f=document.querySelector(".container-forms");f&&(f.innerHTML="",f.appendChild(h))}),r.appendChild(c),s.appendChild(d),e.appendChild(a),e.appendChild(r),e.appendChild(s),q(c,l,"register"),e},oe=n=>{const e=document.createElement("form");return e.className="form",e.setAttribute("novalidate",""),e.classList.add(`form--${n}`),e},A=n=>{const e=document.createElement("div");e.className="container-login",e.classList.toggle("block");const t=document.createElement("div");t.className="form__wrapper";const o=oe("login"),r=document.createElement("h2");r.className="form__title",r.textContent="Logowanie";const a=n.filter(s=>s.category==="login");a.forEach(s=>{const d=I.createFields(s);o.appendChild(d)});const c=document.createElement("button");c.className="button",c.classList.add("form__button"),c.type="submit",c.textContent="Zaloguj się";const l=document.createElement("p");l.classList.add("form__foot"),l.textContent="Nie masz konta?";const i=document.createElement("a");return i.className="form__foot__link",i.textContent="Zarejestruj się",i.addEventListener("click",s=>{s.preventDefault(),document.querySelector(".container-login")&&e.classList.toggle("block"),document.querySelector(".container-register")&&e.classList.toggle("block");const m=M(_),u=document.querySelector(".container-forms");u&&(u.innerHTML="",u.appendChild(m))}),l.appendChild(i),t.appendChild(o),t.appendChild(l),o.appendChild(c),e.appendChild(r),e.appendChild(t),q(o,a,"login"),e},re=(n="")=>{const e=document.createElement("div");e.className="container";const t=document.createElement("div");t.className="container__forms";const o=document.createElement("a");o.className="container__link-home",o.setAttribute("id","home"),o.href="/index.html";const r=document.createElement("h3");if(r.innerText="Strona główna",o.appendChild(r),t.appendChild(o),t.appendChild(A(_)),n==="register"){const a=document.createElement("a");a.className="container__link-home",a.setAttribute("id","home"),a.href="/index.html";const c=document.createElement("h3");c.innerText="Strona główna",a.appendChild(c),t.appendChild(a),t.appendChild(M(_))}return e.appendChild(t),e},ae=async n=>{try{const e=await fetch(`${g}/selectedProduct?path=${n}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to fetch product details");const[t]=await e.json();console.log(t);const o=document.createElement("div");o.className="selectedProduct__container";const r=document.createElement("div");r.style.backgroundImage=`url('/assets/${t.imageBackground}.jpg')`,r.className="selectedProduct__image";const a=document.createElement("div");a.className="selectedProduct__description";const c=document.createElement("h1");c.className="selectedProduct__title",c.textContent=`${t.name}`;const l=document.createElement("p");l.className="selectedProduct__price",l.textContent=`${t.price}`,a.appendChild(c),a.appendChild(l);const i=document.createElement("button");return i.className="selectedProduct__addButton",i.textContent="Dodaj do koszyka",i.addEventListener("click",async()=>{try{const s={productId:t.id,name:t.name,price:t.price,imageBackground:t.imageBackground,quantity:1};if((await fetch(`${g}/cart`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)alert(`${t.name} został dodany do koszyka!`);else throw new Error("Wystąpił błąd podczas dodawania do koszyka")}catch(s){console.error("Error adding product to cart:",s)}}),o.appendChild(r),o.appendChild(a),o.appendChild(i),o}catch(e){throw console.error("Error fetching the product:",e),e}};async function v(){const n=`${g}/products/`;try{return(await(await fetch(n)).json()).All}catch(e){return console.error("Error fetching products:",e),[]}}async function j(){const e=(await v()).reduce((t,o)=>(t.includes(o.collectionType)||t.push(o.collectionType),t),[]);return console.log(e),e}async function se(){const n=await v(),e=await j(),t={};return e.forEach(o=>{const r=n.find(a=>a.collectionType===o);r&&(t[o]=r)}),t}async function ce(){const n=await v(),e=await j(),t={};return e.forEach(o=>{t[o]=n.filter(r=>r.collectionType===o)}),t}const ie=async n=>{const e=await ce(),t=document.createElement("section");t.classList.add("section","products");const o=document.createElement("h1");o.textContent=n,o.style.textAlign="center";const r=document.createElement("a");r.href="/index.html";const a=document.createElement("h5");a.textContent=`Strona główna / ${n}`,r.appendChild(a);const c=document.createElement("ul");return c.classList.add("products__list"),t.appendChild(o),t.appendChild(r),t.appendChild(c),Object.entries(e).forEach(([l,i])=>{l.toLowerCase()===n.toLowerCase()&&i.forEach(s=>{const d=document.createElement("a");d.href=`/${s==null?void 0:s.path}`;const p=document.createElement("li");p.className="product",p.classList.add("products__item");const m=document.createElement("img");m.className="product__photo",m.style.backgroundImage=`url('/assets/${s.imageBackground}.jpg')`;const u=document.createElement("figure");u.className="product__figure",u.appendChild(m);const h=document.createElement("div");h.className="product__details";const f=document.createElement("i");f.classList.add("product__icon","fa-solid","fa-up-right-and-down-left-from-center"),f.style.fontSize="1.5em",h.appendChild(f),p.appendChild(u),p.appendChild(h);const w=document.createElement("div");w.style.paddingTop="1rem";const L=document.createElement("h3");L.className="product__title",L.classList.add("products__title"),L.textContent=s.name;const k=document.createElement("span");k.textContent=`${s.price}zł`,k.className="product__price",w.appendChild(L),w.appendChild(k),p.appendChild(w),d.addEventListener("click",async z=>{z.preventDefault();try{const x=await(await fetch(`${g}/selectedProduct`)).json();if(x.length>0)for(const b of x)await fetch(`${g}/selectedProduct/${b.id}`,{method:"DELETE"});const W={productId:s.id,name:s.name,path:s.path,price:s.price,imageBackground:s.imageBackground};if((await fetch(`${g}/selectedProduct`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(W)})).ok){let b=d.getAttribute("href")||d.href;b?pe(b):console.warn("No href found on linkItem")}else throw new Error("Wystąpił błąd podczas dodawania do koszyka")}catch(N){console.error("Error adding product to cart:",N),alert("Wystąpił problem podczas dodawania do koszyka.")}}),d.appendChild(p),c.appendChild(d)})}),t},S=[{path:"/",page:R},{path:"/admin",page:J},{path:"/:category",componentProducts:ie},{path:"/cart",componentCart:K},{path:"/login",componentLogin:()=>re("login")},{path:"/:product",componentSelectedProduct:ae}];function de(n){for(const e of S){const t=new RegExp(`^${e.path.replace(":category","(\\w+)")}$`),o=n.match(t);if(o)return{...e,param:o[1]}}console.log("No matching route found.")}function le(n){for(const e of S){const t=new RegExp(`^${e.path.replace(":product","(\\w+)")}$`),o=n.match(t);if(o)return{...e,param:o[1]}}console.log("No matching route found.")}function B(n){return S.find(e=>e.path===n)}async function F(n){var o;const e=de(n),t=document.getElementById("root");t&&(e?e.componentProducts&&e.param?e.componentProducts(e.param).then(r=>{t.innerHTML="",t.appendChild(r)}).catch(r=>{console.error("Error loading component:",r),t.innerHTML=E()}):t.innerHTML=((o=e.page)==null?void 0:o.call(e))||E():t.innerHTML=E(),window.history.pushState({},"",n))}async function pe(n){var o;const e=le(n),t=document.getElementById("root");t&&(e?e.componentSelectedProduct&&e.param?e.componentSelectedProduct(e.param).then(r=>{t.innerHTML="",t.appendChild(r)}).catch(r=>{console.error("Error loading component:",r),t.innerHTML=E()}):t.innerHTML=((o=e.page)==null?void 0:o.call(e))||E():t.innerHTML=E(),window.history.pushState({},"",n))}async function H(n){const e=B(n),t=document.getElementById("root");if(t){if(e)if(e.componentCart)try{t.innerHTML="";const o=await e.componentCart();t.appendChild(o)}catch(o){console.error("Error loading component:",o),t.innerHTML=E()}else t.innerHTML="<h1>404 - Page Not Found</h1>";else t.innerHTML="<h1>404 - Page Not Found</h1>";window.history.pushState({},"",n)}}async function ue(n){const e=B(n),t=document.getElementById("root");if(t){if(e)if(e.componentLogin)try{t.innerHTML="";const o=e.componentLogin();t.appendChild(o)}catch(o){console.error("Error loading component:",o),t.innerHTML=E()}else t.innerHTML="<h1>404 - Page Not Found</h1>";else t.innerHTML="<h1>404 - Page Not Found</h1>";window.history.pushState({},"",n)}}window.addEventListener("popstate",()=>{F(window.location.pathname)});const me=()=>{const n=document.createElement("div");n.classList.add("menu");const e=document.createElement("ul");return e.classList.add("menu__list"),D.forEach(t=>{console.log(t);const o=document.createElement("li");o.classList.add("menu__item");const r=document.createElement("a");r.href=t.path,console.log(t.path),r.textContent=t.categoryName,r.classList.add("menu__link"),r.addEventListener("click",a=>{a.preventDefault();const c=r.getAttribute("href");c&&H(c)}),o.appendChild(r),e.appendChild(o)}),n.appendChild(e),n},he=()=>{const n=document.createElement("nav");n.id="menu-mobile",n.classList.add("menu-mobile");const e=O();e.addEventListener("click",()=>{const o=document.querySelector("#burger-menu");o&&o.classList.toggle("none"),n.classList.toggle("none")});const t=me();return n.appendChild(e),n.appendChild(t),n},ge=()=>{const n=document.createElement("header");n.classList.add("header"),document.createElement("div").classList.add("header__top");const t=document.createElement("div");t.classList.add("header__mobile");const o=U(),r=he();r.classList.add("none"),o.addEventListener("click",()=>{o.classList.toggle("none"),r.classList.toggle("none")}),t.appendChild(o),n.appendChild(r),n.appendChild(t);const a=document.createElement("div");return a.className="header__basket",t.appendChild(a),n.appendChild(t),n},fe=()=>{const n=document.createElement("div");n.className="basket__wrapper";const e=document.createElement("a");e.setAttribute("id","basket"),e.classList.add("basket__link"),e.href="/cart";const t=document.createElement("i");t.classList.add("fas","fa-shopping-basket"),e.appendChild(t),n.appendChild(e);const o=n.querySelector("#basket");return o&&o.addEventListener("click",r=>{r.preventDefault();const a=o.getAttribute("href");a&&H(a)}),n},Ee=()=>{const n=document.createElement("div");n.className="loginIcon__wrapper";const e=document.createElement("a");e.classList.add("loginIcon__link"),e.setAttribute("id","loginIcon"),e.href="/login";const t=document.createElement("i");t.classList.add("fas","fa-user"),t.style.fontSize="1em",e.appendChild(t);const o=document.createElement("div");return o.textContent="zalogowany jako",n.appendChild(e),e.addEventListener("click",r=>{r.preventDefault();const a=e.getAttribute("href");a&&ue(a)}),e},ye=[{value:"Moje konto",text:"Moje konto",disabled:!0,selected:!0},{value:"ustawienia",text:"Ustawienia"},{value:"wyloguj",text:"Wyloguj"}],Ce=()=>{const n=document.createElement("li");n.className="userAccount__wrapper",n.textContent="Moje konto";const e=document.createElement("ul");return e.classList.add("userAccount__list"),ye.forEach(t=>{const o=document.createElement("li");o.className="userAccount__item",o.textContent=t.text,o.dataset.value=t.value,t.disabled&&o.classList.add("disabled"),t.selected&&o.classList.add("selected"),o.addEventListener("click",()=>{t.disabled||(t.value==="wyloguj"?(localStorage.removeItem("currentUser"),window.location.reload()):console.log(`Selected: ${t.text}`))}),e.appendChild(o)}),n.addEventListener("click",()=>{e.classList.toggle("open")}),n.appendChild(e),n},we=()=>{const n=document.createElement("div");n.classList.add("header__top");const e=document.createElement("div");e.className="account__wrapper";const t=Ee(),o=Ce(),r=fe();return e.appendChild(t),e.appendChild(o),e.appendChild(r),n.appendChild(e),n},Le=async()=>{const n=document.createElement("section");n.classList.add("section","categories");const e=document.createElement("ul");e.classList.add("categories__list");const t=await se();return Object.entries(t).forEach(([o,r])=>{const a=document.createElement("li");a.classList.add("categories__item"),a.style.backgroundImage=`url('/assets/${r.imageBackground}.jpg')`;const c=document.createElement("div");c.classList.add("categories__description");const l=document.createElement("div"),i=document.createElement("h2");i.classList.add("categories__title"),i.textContent=o.charAt(0).toUpperCase()+o.slice(1),l.appendChild(i);const s=document.createElement("a");s.href=`/${o.toLowerCase()}`;const d=document.createElement("span");d.textContent="Zobacz produkty",s.classList.add("categories__link"),s.appendChild(d),c.appendChild(l),c.appendChild(s);const p=document.createElement("div");p.classList.add("categories__arrow");const m=document.createElement("i");m.classList.add("fas","fa-arrow-right"),p.appendChild(m),s.appendChild(p),s.addEventListener("click",u=>{u.preventDefault();let h=s.getAttribute("href");h&&h&&F(h)}),a.appendChild(c),n.appendChild(a)}),n.appendChild(e),n};async function be(){const n=`${g}/carousel/`;try{const o=await(await fetch(n)).json();return console.log(o),o}catch(e){return console.error("Error fetching products:",e),[]}}const _e=async()=>{const n=await be();console.log(n);const e=document.createElement("div");e.className="carousel__wrapper";const t=document.createElement("div");t.classList.add("carousel"),t.setAttribute("id","carousel"),t.setAttribute("araia-label","carousel");const o=document.createElement("div");o.classList.add("link__wrapper");const r=document.createElement("a");r.classList.add("link__carousel"),o.appendChild(r);const a=document.createElement("div");a.classList.add("carousel__button-wrapper","prevBtn");const c=document.createElement("button");c.className="carousel__button prevBtn",c.id="prevBtn",c.innerHTML="&lt",a.appendChild(c);const l=document.createElement("div");l.classList.add("carousel__button-wrapper","nextBtn");const i=document.createElement("button");i.className="carousel__button nextBtn",i.id="nextBtn",i.innerHTML="&gt",l.appendChild(i),t.appendChild(o),t.appendChild(a),t.appendChild(l);let s=0,d=3e3;const p=()=>{t.style.backgroundImage=`url('/assets/logo/${n[s].imageBackground}.jpg')`,r.href=n[s].path,r.textContent=n[s].name},m=()=>{s=s===0?n.length-1:s-1,p()},u=()=>{s=s===n.length-1?0:s+1,p()};let h=setInterval(u,d);c.addEventListener("click",()=>{m(),f()}),i.addEventListener("click",()=>{u(),f()});const f=()=>{clearInterval(h),h=setInterval(u,d)};return p(),e.appendChild(t),e},ke=async()=>{const n=document.createElement("main");n.classList.add("main");const e=_e(),t=Le();return n.appendChild(await e),n.appendChild(await t),n};async function ve(){const n=document.querySelector("#root");if(!n)return;n.innerHTML="";const e=we(),t=ge(),o=await ke();n.append(e,t,o)}function Se(){ve()}document.addEventListener("DOMContentLoaded",Se);
